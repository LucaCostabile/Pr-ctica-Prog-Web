<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>To-Do List</title>
  <style>
    body { font-family: Arial, sans-serif; padding:16px; max-width:680px }
    h1 { margin-top:0 }
    .row { display:flex; gap:8px; margin-bottom:10px }
    input[type=text]{ flex:1; padding:6px 8px }
    button { padding:6px 10px; cursor:pointer }
    ul { list-style:none; padding:0; margin:0 }
    li { display:flex; align-items:center; justify-content:space-between; gap:8px; border:1px solid #ddd; background:#fff; padding:8px; margin-bottom:8px }
  li.completed { background:#dff6d8; }
    .txt { flex:1 }
  .actions { display:flex; gap:14px }
    .btn-ok { background:#e8f7ea; border:1px solid #4caf50; color:#2e7d32; padding:2px 6px }
    .btn-del { background:#fde7e7; border:1px solid #d32f2f; color:#b71c1c; padding:2px 6px }
    #log { margin-top:16px; white-space:pre-line; font-family:monospace }
  </style>
</head>
<body>
  <h1>To-Do List</h1>

  <div class="row">
    <input id="taskInput" type="text" placeholder="Escribe una tarea..." />
    <button id="addBtn">Agregar</button>
  </div>

  <!-- Usamos el id 'contenedor' tal como en tu snippet -->
  <ul id="contenedor"></ul>

  <h2>Registro de cambios en el DOM:</h2>
  <div id="log">Esperando cambios en el DOM...</div>

  <script>
    const contenedor = document.getElementById('contenedor');
    const addBtn = document.getElementById('addBtn');
    const input = document.getElementById('taskInput');
    const log = document.getElementById('log');

    function pushLog(line){ log.textContent += '\n' + line; }

    // Crear un LI con botones completar/borrar
    function crearItem(texto, completada=false){
      const li = document.createElement('li');
      if (completada) { li.classList.add('completed'); li.setAttribute('data-completed','true'); }

      const span = document.createElement('span');
      span.className = 'txt';
      span.textContent = texto;

      const actions = document.createElement('div');
      actions.className = 'actions';
      const ok = document.createElement('button'); ok.className = 'btn-ok'; ok.title='Marcar'; ok.textContent = '✓';
      const del = document.createElement('button'); del.className = 'btn-del'; del.title='Eliminar'; del.textContent = '✖';
      actions.append(ok, del);

      li.append(span, actions);

      ok.addEventListener('click', () => {
        const isCompleted = li.classList.toggle('completed');
        if (isCompleted) li.setAttribute('data-completed','true');
        else li.removeAttribute('data-completed');
      });
      del.addEventListener('click', () => li.remove());

      return li;
    }

    function agregarDesdeInput(){
      const v = input.value.trim();
      if (!v) return;
      contenedor.appendChild(crearItem(v));
      input.value=''; input.focus();
    }

    addBtn.addEventListener('click', agregarDesdeInput);
    input.addEventListener('keydown', e=>{ if(e.key==='Enter') agregarDesdeInput(); });

    // Ítems iniciales como en la imagen
    contenedor.appendChild(crearItem('Ir a la facultad', true));
    contenedor.appendChild(crearItem('Hacer las compras', false));

    // Observer para childList y attributes (en hijos)
    const observer = new MutationObserver(mutaciones => {
      mutaciones.forEach(m => {
        if (m.type === 'childList') pushLog('Cambio: childList en UL');
        else if (m.type === 'attributes') pushLog('Cambio: attributes en LI');
      });
    });
    observer.observe(contenedor, { childList: true, attributes: true, subtree: true });
  </script>
</body>
</html>
